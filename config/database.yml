  <%
    socket = [
    ENV["DATABASE_MYSQL_SOCKET"]
  ].detect { |f| f && File.exist?(f) }
    %>

  default: &default
    adapter: mysql2
    pool: 20
    timeout: 5000

  development:
    <<: *default
    database: <%= ENV['DATABASE_NAME'] %>
    socket: /var/run/mysqld/mysqld.sock
    host: <%= ENV['DATABASE_HOST'] %>
    port: <%= ENV['DATABASE_PORT'] %>
    username: <%= ENV['DATABASE_USERNAME'] %>
    password: <%= ENV['DATABASE_PASSWORD'] %>

    # Warning: The database defined as "test" will be erased and
    # re-generated from your development database when you run "rake".
    # Do not set this db to the same as development or production.
  test:
    <<: *default
    database: <%= ENV['DATABASE_NAME_TEST'] %>
    socket: /var/run/mysqld/mysqld.sock
    host: <%= ENV['DATABASE_HOST'] %>
    port: <%= ENV['DATABASE_PORT'] %>
    username: <%= ENV['DATABASE_USERNAME'] %>
    password: <%= ENV['DATABASE_PASSWORD'] %>

  production:
    <<: *default
    database: <%= ENV['DATABASE_NAME'] %>
    host: <%= ENV['DATABASE_HOST'] %>
    port: <%= ENV['DATABASE_PORT'] %>
    username: <%= ENV['DATABASE_USERNAME'] %>
    password: <%= ENV['DATABASE_PASSWORD'] %>
